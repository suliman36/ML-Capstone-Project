(self.webpackChunklite=self.webpackChunklite||[]).push([[7070],{86012:(e,n,t)=>{"use strict";t.d(n,{rz:()=>N,Fm:()=>v,ik:()=>y});var i=t(319),a=t.n(i),r=t(82717),o=t(93235),d=t(54975),l=t(50207),s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"IframeParagraph_paragraph"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Paragraph"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"iframe"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mediaResource"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"iframeSrc"}},{kind:"Field",name:{kind:"Name",value:"iframeHeight"}},{kind:"Field",name:{kind:"Name",value:"iframeWidth"}},{kind:"Field",name:{kind:"Name",value:"title"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"layout"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getEmbedlyCardUrlParams_paragraph"}},{kind:"FragmentSpread",name:{kind:"Name",value:"Markups_paragraph"}}]}}].concat(a()(d.Zp.definitions),a()(l.Z.definitions))},u=t(78882),c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodyParagraph_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TextParagraph_highlight"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ImageParagraph_highlight"}}]}}].concat(a()(r.m8.definitions),a()(o.Zl.definitions))},m={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodyParagraph_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TextParagraph_privateNote"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ImageParagraph_privateNote"}}]}}].concat(a()(r.hz.definitions),a()(o.T_.definitions))},g={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodyParagraph_paragraph"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Paragraph"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ImageParagraph_paragraph"}},{kind:"FragmentSpread",name:{kind:"Name",value:"TextParagraph_paragraph"}},{kind:"FragmentSpread",name:{kind:"Name",value:"IframeParagraph_paragraph"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MixtapeParagraph_paragraph"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CodeBlockParagraph_paragraph"}}]}}].concat(a()(o.ck.definitions),a()(r.Rg.definitions),a()(s.definitions),a()(u.b.definitions),a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"CodeBlockParagraph_paragraph"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Paragraph"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"codeBlockMetadata"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lang"}},{kind:"Field",name:{kind:"Name",value:"mode"}}]}}]}}]))},p={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphStyleGrouping_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodyParagraph_highlight"}}]}}].concat(a()(c.definitions))},f={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphStyleGrouping_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodyParagraph_privateNote"}}]}}].concat(a()(m.definitions))},h={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphLayoutGrouping_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphStyleGrouping_privateNote"}}]}}].concat(a()(f.definitions))},k={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphLayoutGrouping_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphStyleGrouping_highlight"}}]}}].concat(a()(p.definitions))},v={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodySection_paragraph"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Paragraph"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodyParagraph_paragraph"}}]}}].concat(a()(g.definitions))},N={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodySection_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphLayoutGrouping_highlight"}}]}}].concat(a()(k.definitions))},y={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodySection_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphLayoutGrouping_privateNote"}}]}}].concat(a()(h.definitions))}},37070:(e,n,t)=>{"use strict";t.d(n,{yO:()=>me,Pk:()=>ge,XV:()=>pe,w6:()=>fe});var i=t(28655),a=t.n(i),r=t(67154),o=t.n(r),d=t(319),l=t.n(d),s=t(92471),u=t(67294),c=t(33380),m=t(14646),g={display:"flex",justifyContent:"center",marginTop:"32px",marginBottom:"14px",paddingTop:"24px",paddingBottom:"10px"},p=function(e){return{backgroundColor:e.baseColor.text.darker,borderRadius:"50%",display:"inline-block",height:"3px",width:"3px"}},f={marginRight:"20px"};function h(){var e=(0,m.I)();return u.createElement("div",{className:e(g),role:"separator"},u.createElement("span",{className:e([p,f])}),u.createElement("span",{className:e([p,f])}),u.createElement("span",{className:e(p)}))}var k=t(41135),v=t(86012),N=t(63038),y=t.n(N),S=t(50008),P=t.n(S),F=t(23450),_=t.n(F),x=t(17193),E=t(27048),b=t(77355),B=t(8431),w=t(31889),T=t(34135);function I(){var e=a()(["\n  fragment PostNotesDetails_user on User {\n    id\n    imageId\n    name\n    username\n    ...UserAvatar_user\n  }\n  ","\n"]);return I=function(){return e},e}function C(e){var n=e.grid.xStep;return{padding:"".concat(3*n,"px ").concat(4*n,"px ").concat(3*n,"px"),width:"400px"}}function D(e){var n=e.close,t=e.users,i=(0,m.I)(),a=u.useRef(null),r=(0,w.F)(),o=r.grid.xStep;return u.useEffect((function(){function e(){var e=a.current;if(e&&e.getBoundingClientRect){var t=e.getBoundingClientRect(),i=t.bottom,o=t.top<0||i>window.innerHeight,d=window.innerWidth<r.breakpoints.xl;(o||d)&&n()}}return T.V6.on("scroll_end",e),T.V6.on("resize_throttled",e),function(){T.V6.off("scroll_end",e),T.V6.off("resize_throttled",e)}}),[]),u.createElement("section",{ref:a,className:i(C)},u.createElement(b.x,{borderBottom:"BASE_LIGHTER",marginBottom:"-".concat(o,"px"),paddingBottom:"".concat(2*o,"px")},u.createElement(B.Lh,null,"Highlights (".concat(t.length,")"))),u.createElement(b.x,{marginLeft:"3px"},t.length&&t.map((function(e){return u.createElement(b.x,{display:"inline-block",key:e.id,marginTop:"".concat(5*o,"px"),marginRight:"".concat(5*o,"px"),width:"".concat(8*o,"px")},u.createElement(x.Yt,{hasPopover:!0,link:!0,user:e,scale:"XS"}))}))))}var O=u.memo(D),M=(0,s.Ps)(I(),E.W),R=t(83363),L=t(69217),H=t(60748),G=t(25267),z=t(75880),V=t(66227),A=t(87691),W=t(29746),Y=t(39202);function U(){var e=a()(["\n  fragment PostNotesMarkers_creator on User {\n    id\n    name\n  }\n"]);return U=function(){return e},e}function j(){var e=a()(["\n  fragment PostNotesMarkers_highlight on Quote {\n    id\n    endOffset\n    paragraphs {\n      id\n      name\n    }\n    startOffset\n    userId\n    user {\n      id\n      name\n      ...PostNotesDetails_user\n    }\n  }\n  ","\n"]);return j=function(){return e},e}function Q(){return{border:"none",cursor:"pointer",display:"block",padding:"0px",textAlign:"left",width:"100%"}}function Z(){return{left:"100%",position:"absolute",top:0}}function X(e,n){return{marginTop:"6px",maxWidth:"100%",position:"absolute",top:"".concat(e-(n||0),"px"),whiteSpace:"nowrap",width:"100%"}}function q(e){return{marginLeft:"auto",marginRight:"auto",maxWidth:"".concat((0,W.G)(e,8,!0),"px"),position:"relative"}}function J(){return{display:"inline-block",maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}function K(e,n){return"number"==typeof e.startOffset&&"number"==typeof n.startOffset?e.startOffset<n.startOffset?-1:1:-1}function $(e,n){var t=n.startOffset,i=n.endOffset,a=n.paragraphs[0].name;if(!a||"number"!=typeof t||"number"!=typeof i)return e;var r=!1,o=e[a]||[];return o.length&&(o=o.map((function(e){var a=t<=e.endOffset+1,o=e.startOffset,d=e.endOffset;return a&&(r=!0,e.highlights.push(n),d=Math.max(i,e.endOffset),o=Math.min(t,e.startOffset)),{highlights:e.highlights,endOffset:d,startOffset:o}}))),r||o.push({highlights:[n],endOffset:i,startOffset:t}),e[a]=o,e}function ee(e){var n=e.children,t=e.highlightString,i=e.toggle,a=(0,m.I)();return"Top highlight"===t?u.createElement(u.Fragment,null,n):u.createElement("button",{className:a(Q),onClick:function(){return i()},onMouseDown:function(e){return e.preventDefault()}},n)}function ne(e){var n=e.creator,t=e.positionMap,i=e.yPosOffset,a=e.viewerEdge,r=(0,m.I)();if("number"!=typeof i)return null;var o=Array.from(t.entries());return u.createElement(G.I,{nonBlocking:!0},(function(e){return u.createElement(u.Fragment,null,o.map((function(t,o){var d=y()(t,2),l=d[0],s=d[1],c=function(e,n,t,i){var a=null==i?void 0:i.isFollowing;if(1===e.length){if("anon"===e[0].userId)return"Top highlight";if(!n)return null;if(t&&t.id===e[0].userId&&n.id!==t.id&&!a)return null;if(n&&n.id===e[0].userId)return"You highlighted";if(e[0].user&&e[0].user.name)return e[0].user.name}var r=[];if(e.forEach((function(e){if(e.user){var i=n&&n.id===e.userId,o=e.user.name,d=t&&t.id===e.userId&&(!n||n.id!==t.id&&!a);i?r.length&&"You"===r[0]||r.unshift("You"):d||!o||r.includes(o)||r.push(o)}})),!r.length)return"Top highlight";if(1===r.length)return"You"===r[0]?"You highlighted":r[0];if(2===r.length)return"".concat(r[0]," and ").concat(r[1]);var o=r.slice(0,2),d=r.length-o.length;return"".concat(o[0],", ").concat(o[1],", and ").concat(d," ").concat(_()("other",d))}(s,e,n,a);return c?u.createElement("div",{className:r(X(l,i)),key:o},u.createElement(V.B,null,(function(e){var n=e.isVisible,t=e.hide,i=e.toggle;return u.createElement(u.Fragment,null,u.createElement(ee,{toggle:i,highlightString:c},u.createElement(A.F,{scale:"S"},u.createElement("span",{className:r(J)},c))),n&&u.createElement(L.G,{boundariesElement:"document",isVisible:!0,hide:t,placement:"right",popoverRenderFn:function(){var e=new Set,n=s.map((function(n){var t=n.user;return t&&t.id&&!e.has(t.id)?(e.add(t.id),t):null})).filter(Y.b);return u.createElement(O,{close:t,users:n})}},u.createElement(u.Fragment,null)))}))):null})))}))}var te=u.forwardRef((function(e,n){var t=e.creator,i=e.highlights,a=u.useContext(R.Vc).highlightSegments,r=u.useRef(null),o=u.useState(null),d=y()(o,2),s=d[0],c=d[1],g=(0,m.I)(),p=(0,w.F)(),f=u.useState(null),h=y()(f,2),k=h[0],v=h[1],N=u.useState(null),S=y()(N,2),F=S[0],_=S[1],x=(0,z.Pd)(t).viewerEdge;return u.useEffect((function(){var e=function(){var e=function(e,n,t){var i=new Map;if(e.size&&n.length){var a=function(e){var n=l()(e).sort(K).reduce($,{});return Object.values(n).reduce((function(e,n){return n&&"object"===P()(n)&&n.length?(e.push.apply(e,l()(n)),e):e}),[])}(n),r=[];a.forEach((function(n){var a=n.highlights[0],o=a.paragraphs[0].name;if(a&&"number"==typeof a.startOffset&&o){var d=e.get("".concat(o,"_").concat(a.startOffset));if(d&&d.ref&&d.ref.current){var l,s=d.ref.current.getBoundingClientRect().top+window.pageYOffset;r.length&&(l=r.find((function(e){return s<e+t.newFonts.body.lineHeight.M&&s>e||s>e-t.newFonts.body.lineHeight.M&&s<e})));var u=l||s,c=i.get(u)||[];c.length||r.push(u);var m=c.concat(n.highlights);m.length&&i.set(u,m)}}}))}return i}(a,i,p);if(c(e),"function"!=typeof n&&null!=n&&n.current&&_(n.current.offsetTop),null!=r&&r.current){var t=r.current.getBoundingClientRect().left,o=window.innerWidth-t-8*p.grid.xStep;v(o)}};T.V6.on("resize_throttled",e);var t=(0,H.x)((function(n){"iframe.resize"!==n.context&&"player.js"!==n.context||e()})).destructor;return e(),function(){T.V6.off("resize_throttled",e),t()}}),[i,a]),u.createElement("div",{className:g(q)},u.createElement(b.x,{display:"block",xs:{display:"none"},sm:{display:"none"},md:{display:"none"},lg:{display:"none"}},u.createElement("aside",{className:g(Z),ref:r,style:{width:k?"".concat(k,"px"):void 0}},s&&u.createElement(ne,{creator:t,highlights:i,positionMap:s,yPosOffset:F,width:k,viewerEdge:x}))))})),ie=u.memo(te),ae=(0,s.Ps)(j(),M),re=(0,s.Ps)(U()),oe=t(75119),de=t(32342);function le(){var e=a()(["\n  fragment PostBody_privateNote on Note {\n    ...normalizedBodyModel_privateNote\n    ...PostBodySection_privateNote\n  }\n  ","\n  ","\n"]);return le=function(){return e},e}function se(){var e=a()(["\n  fragment PostBody_creator on User {\n    ...PostNotesMarkers_creator\n  }\n  ","\n"]);return se=function(){return e},e}function ue(){var e=a()(["\n  fragment PostBody_highlight on Quote {\n    paragraphs {\n      id\n    }\n    ...normalizedBodyModel_highlight\n    ...PostBodySection_highlight\n    ...PostNotesMarkers_highlight\n  }\n  ","\n  ","\n  ","\n"]);return ue=function(){return e},e}function ce(){var e=a()(["\n  fragment PostBody_bodyModel on RichText {\n    sections {\n      name\n      startIndex\n      textLayout\n      imageLayout\n      backgroundImage {\n        id\n        originalHeight\n        originalWidth\n      }\n      videoLayout\n      backgroundVideo {\n        videoId\n        originalHeight\n        originalWidth\n        previewImageId\n      }\n    }\n    paragraphs {\n      id\n      ...PostBodySection_paragraph\n    }\n    ...normalizedBodyModel_richText\n  }\n  ","\n  ","\n"]);return ce=function(){return e},e}var me=u.forwardRef((function(e,n){var t,i,a=e.bodyModel,r=e.creator,d=e.highlights,s=e.isAuroraPostPageEnabled,g=e.privateNotes,p=e.postBodyInserts,f=e.richTextStyle,v=void 0===f?"FULL_PAGE":f,N=e.shouldHideHighlightAnnotations,y=void 0!==N&&N,S=(0,m.I)(),P=u.createRef(),F=null===(t=u.useContext(c.u6).watchedBounds.get("byline"))||void 0===t||null===(i=t.ref)||void 0===i?void 0:i.current,_=F?F.offsetTop-48:100,x={position:"absolute",left:0,top:"calc(100vh + ".concat(_,"px)"),bottom:"calc(100vh + ".concat(100,"px)"),width:"10px",pointerEvents:"none"},E=(0,oe.Zx)().privateNoteSelection,b=u.useMemo((function(){return d&&E?[].concat(l()(d),[E]):d}),[d,E]),B=p?function(e){var n;return Object.keys(e).some((function(t){return!!e[t].find((function(e){return"BYLINE"===e.insertType}))&&(n=t,!0)})),n}(p):void 0,w=u.useMemo((function(){return(0,de.fj)(a,{bylineParagraphName:B,highlights:b,isAuroraPostPageEnabled:s,isPostPage:!0,privateNotes:g,richTextStyle:v})}),[a,b,g,v]),T=p&&p.first;return u.createElement("section",{ref:n},u.createElement("div",{ref:P},u.createElement(u.Fragment,null,u.createElement(c.TA,{name:"ghost-track",type:"ghost",className:S(x)}),"FULL_PAGE"===v&&d&&d.length>0&&!y&&u.createElement(ie,{creator:r,highlights:l()(d),ref:n}),!!T&&T.map((function(e,n){return e.component?u.createElement("div",{key:"postBodyInsertFirst_".concat(n)},e.component):null}))),w.map((function(e,n){if("HR"===e){var t,i,a=w[n-1],r=w[n+1],d="HR"!==a&&(null==a||null===(t=a.section)||void 0===t?void 0:t.backgroundImage),l="HR"!==r&&(null==r||null===(i=r.section)||void 0===i?void 0:i.backgroundImage);return d||l?null:u.createElement(h,{key:n})}return u.createElement(k.b,o()({key:e.section.name||n,postBodyInserts:p},e))}))))})),ge=(0,s.Ps)(ce(),de.gd,v.Fm),pe=(0,s.Ps)(ue(),de.Cn,v.rz,ae),fe=((0,s.Ps)(se(),re),(0,s.Ps)(le(),de.EH,v.ik))}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/7070.9daf5359.chunk.js.map